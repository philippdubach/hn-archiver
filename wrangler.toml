name = "hn-archiver"
main = "src/worker.ts"
compatibility_date = "2025-12-03"
compatibility_flags = ["nodejs_compat"]

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "hn-archiver"
database_id = "5edd6e65-c226-4439-8a80-00fa5d1386c4"

# Optimized cron schedules - faster discovery, more frequent backfill
[triggers]
crons = ["*/3 * * * *", "*/10 * * * *", "0 */2 * * *"]
# Discovery: every 3 min (was 5) - 480 runs/day
# Updates: every 10 min - 144 runs/day
# Backfill: every 2 hours (was 6) - 12 runs/day

# Workers AI binding for content analysis
[ai]
binding = "AI"

# Vectorize binding for similarity search
[[vectorize]]
binding = "VECTORIZE"
index_name = "hn-similar"

# Observability settings
[observability]
enabled = true
